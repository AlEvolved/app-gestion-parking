# Activer le module de réécriture
<IfModule mod_rewrite.c>
    RewriteEngine On
    
    # Permettre les en-têtes CORS
    <IfModule mod_headers.c>
        Header set Access-Control-Allow-Origin "*"
        Header set Access-Control-Allow-Methods "GET, POST, OPTIONS"
        Header set Access-Control-Allow-Headers "Content-Type, Authorization, X-Requested-With"
        Header set Access-Control-Allow-Credentials "true"
    </IfModule>

    # Gérer les requêtes OPTIONS préliminaires
    RewriteCond %{REQUEST_METHOD} OPTIONS
    RewriteRule ^(.*)$ $1 [R=200,L]

    # Rediriger la racine vers le login
    RewriteRule ^$ FrontEnd/Views/login.html [L]

    # Assurez-vous que les fichiers JavaScript sont correctement servis
    <FilesMatch "\.(js|css)$">
        <IfModule mod_headers.c>
            Header set Cache-Control "no-cache, no-store, must-revalidate"
            Header set Pragma "no-cache"
            Header set Expires 0
        </IfModule>
    </FilesMatch>

    # S'assurer que les fichiers statiques sont accessibles
    RewriteCond %{REQUEST_FILENAME} -f
    RewriteRule ^ - [L]
</IfModule>